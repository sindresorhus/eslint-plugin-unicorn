# Snapshot report for `test/no-top-level-side-effects.js`

The actual snapshot is saved in `no-top-level-side-effects.js.snap`.

Generated by [AVA](https://avajs.dev).

## invalid(1): console.log('loaded'); export const foo = 'bar';

> Input

    `␊
      1 | console.log('loaded');␊
      2 | export const foo = 'bar';␊
    `

> Error 1/1

    `␊
    Message:␊
    > 1 | console.log('loaded');␊
        | ^^^^^^^^^^^^^^^^^^^^^^ Do not use top-level side effects in modules.␊
      2 | export const foo = 'bar';␊
    `

## invalid(2): fetch('/api/init'); export default function app() {}

> Input

    `␊
      1 | fetch('/api/init');␊
      2 | export default function app() {}␊
    `

> Error 1/1

    `␊
    Message:␊
    > 1 | fetch('/api/init');␊
        | ^^^^^^^^^^^^^^^^^^^ Do not use top-level side effects in modules.␊
      2 | export default function app() {}␊
    `

## invalid(3): document.title = 'gone'; export const x = 1;

> Input

    `␊
      1 | document.title = 'gone';␊
      2 | export const x = 1;␊
    `

> Error 1/1

    `␊
    Message:␊
    > 1 | document.title = 'gone';␊
        | ^^^^^^^^^^^^^^^^^^^^^^^^ Do not use top-level side effects in modules.␊
      2 | export const x = 1;␊
    `

## invalid(4): Object.defineProperty(globalThis, 'foo', { value: 1 }); export const x = 1;

> Input

    `␊
      1 | Object.defineProperty(globalThis, 'foo', { value: 1 });␊
      2 | export const x = 1;␊
    `

> Error 1/1

    `␊
    Message:␊
    > 1 | Object.defineProperty(globalThis, 'foo', { value: 1 });␊
        | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Do not use top-level side effects in modules.␊
      2 | export const x = 1;␊
    `

## invalid(5): console.log('a'); fetch('/api'); export const x = 1;

> Input

    `␊
      1 | console.log('a');␊
      2 | fetch('/api');␊
      3 | export const x = 1;␊
    `

> Error 1/2

    `␊
    Message:␊
    > 1 | console.log('a');␊
        | ^^^^^^^^^^^^^^^^^ Do not use top-level side effects in modules.␊
      2 | fetch('/api');␊
      3 | export const x = 1;␊
    `

> Error 2/2

    `␊
    Message:␊
      1 | console.log('a');␊
    > 2 | fetch('/api');␊
        | ^^^^^^^^^^^^^^ Do not use top-level side effects in modules.␊
      3 | export const x = 1;␊
    `

## invalid(6): (function() { console.log('init'); })(); export const x = 1;

> Input

    `␊
      1 | (function() { console.log('init'); })();␊
      2 | export const x = 1;␊
    `

> Error 1/1

    `␊
    Message:␊
    > 1 | (function() { console.log('init'); })();␊
        | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Do not use top-level side effects in modules.␊
      2 | export const x = 1;␊
    `

## invalid(7): export const x = 1; console.log('after export');

> Input

    `␊
      1 | export const x = 1;␊
      2 | console.log('after export');␊
    `

> Error 1/1

    `␊
    Message:␊
      1 | export const x = 1;␊
    > 2 | console.log('after export');␊
        | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Do not use top-level side effects in modules.␊
    `

## invalid(8): import shared from 'x'; shared.flag = true; export default shared;

> Input

    `␊
      1 | import shared from 'x';␊
      2 | shared.flag = true;␊
      3 | export default shared;␊
    `

> Error 1/1

    `␊
    Message:␊
      1 | import shared from 'x';␊
    > 2 | shared.flag = true;␊
        | ^^^^^^^^^^^^^^^^^^^ Do not use top-level side effects in modules.␊
      3 | export default shared;␊
    `

## invalid(9): if (Math.random() > 0.5) { console.log('x'); } export const value = 1;

> Input

    `␊
      1 | if (Math.random() > 0.5) {␊
      2 | 	console.log('x');␊
      3 | }␊
      4 | export const value = 1;␊
    `

> Error 1/1

    `␊
    Message:␊
    > 1 | if (Math.random() > 0.5) {␊
        | ^^^^^^^^^^^^^^^^^^^^^^^^^^␊
    > 2 | 	console.log('x');␊
        | ^^^^^^^^^^^^^^^^^^␊
    > 3 | }␊
        | ^^ Do not use top-level side effects in modules.␊
      4 | export const value = 1;␊
    `

## invalid(10): for (let i = 0; i < 3; i++) { console.log(i); } export const value = 1;

> Input

    `␊
      1 | for (let i = 0; i < 3; i++) {␊
      2 | 	console.log(i);␊
      3 | }␊
      4 | export const value = 1;␊
    `

> Error 1/1

    `␊
    Message:␊
    > 1 | for (let i = 0; i < 3; i++) {␊
        | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^␊
    > 2 | 	console.log(i);␊
        | ^^^^^^^^^^^^^^^^␊
    > 3 | }␊
        | ^^ Do not use top-level side effects in modules.␊
      4 | export const value = 1;␊
    `

## invalid(11): while (false) { break; } export const value = 1;

> Input

    `␊
      1 | while (false) {␊
      2 | 	break;␊
      3 | }␊
      4 | export const value = 1;␊
    `

> Error 1/1

    `␊
    Message:␊
    > 1 | while (false) {␊
        | ^^^^^^^^^^^^^^^␊
    > 2 | 	break;␊
        | ^^^^^^^␊
    > 3 | }␊
        | ^^ Do not use top-level side effects in modules.␊
      4 | export const value = 1;␊
    `

## invalid(12): throw new Error('fail'); export const value = 1;

> Input

    `␊
      1 | throw new Error('fail');␊
      2 | export const value = 1;␊
    `

> Error 1/1

    `␊
    Message:␊
    > 1 | throw new Error('fail');␊
        | ^^^^^^^^^^^^^^^^^^^^^^^^ Do not use top-level side effects in modules.␊
      2 | export const value = 1;␊
    `

## invalid(13): try { doSomething(); } catch {} export const value = 1;

> Input

    `␊
      1 | try {␊
      2 | 	doSomething();␊
      3 | } catch {}␊
      4 | export const value = 1;␊
    `

> Error 1/1

    `␊
    Message:␊
    > 1 | try {␊
        | ^^^^^␊
    > 2 | 	doSomething();␊
        | ^^^^^^^^^^^^^^^␊
    > 3 | } catch {}␊
        | ^^^^^^^^^^^ Do not use top-level side effects in modules.␊
      4 | export const value = 1;␊
    `

## invalid(14): switch (process.env.NODE_ENV) { case 'production': break; } export const value = 1;

> Input

    `␊
      1 | switch (process.env.NODE_ENV) {␊
      2 | 	case 'production':␊
      3 | 		break;␊
      4 | }␊
      5 | export const value = 1;␊
    `

> Error 1/1

    `␊
    Message:␊
    > 1 | switch (process.env.NODE_ENV) {␊
        | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^␊
    > 2 | 	case 'production':␊
        | ^^^^^^^^^^^^^^^^^^^␊
    > 3 | 		break;␊
        | ^^^^^^^^^^^^^^^^^^^␊
    > 4 | }␊
        | ^^ Do not use top-level side effects in modules.␊
      5 | export const value = 1;␊
    `

## invalid(15): import shared from 'x'; Object.assign(shared, { flag: true }); export default shared;

> Input

    `␊
      1 | import shared from 'x';␊
      2 | Object.assign(shared, { flag: true });␊
      3 | export default shared;␊
    `

> Error 1/1

    `␊
    Message:␊
      1 | import shared from 'x';␊
    > 2 | Object.assign(shared, { flag: true });␊
        | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Do not use top-level side effects in modules.␊
      3 | export default shared;␊
    `

## invalid(16): export default setup();

> Input

    `␊
      1 | export default setup();␊
    `

> Error 1/1

    `␊
    Message:␊
    > 1 | export default setup();␊
        | ^^^^^^^^^^^^^^^^^^^^^^^ Do not use top-level side effects in modules.␊
    `

## invalid(17): export default (console.log('x'), 1);

> Input

    `␊
      1 | export default (console.log('x'), 1);␊
    `

> Error 1/1

    `␊
    Message:␊
    > 1 | export default (console.log('x'), 1);␊
        | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Do not use top-level side effects in modules.␊
    `

## invalid(18): module.exports.foo = 1; console.log('loaded');

> Input

    `␊
      1 | module.exports.foo = 1;␊
      2 | console.log('loaded');␊
    `

> Error 1/1

    `␊
    Message:␊
      1 | module.exports.foo = 1;␊
    > 2 | console.log('loaded');␊
        | ^^^^^^^^^^^^^^^^^^^^^^ Do not use top-level side effects in modules.␊
    `

## invalid(19): export default new App();

> Input

    `␊
      1 | export default new App();␊
    `

> Error 1/1

    `␊
    Message:␊
    > 1 | export default new App();␊
        | ^^^^^^^^^^^^^^^^^^^^^^^^^ Do not use top-level side effects in modules.␊
    `

## invalid(20): export default { data: fetchData() };

> Input

    `␊
      1 | export default { data: fetchData() };␊
    `

> Error 1/1

    `␊
    Message:␊
    > 1 | export default { data: fetchData() };␊
        | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Do not use top-level side effects in modules.␊
    `

## invalid(21): export default [setup(), teardown()];

> Input

    `␊
      1 | export default [setup(), teardown()];␊
    `

> Error 1/1

    `␊
    Message:␊
    > 1 | export default [setup(), teardown()];␊
        | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Do not use top-level side effects in modules.␊
    `

## invalid(22): export default html`<div>hello</div>`;

> Input

    `␊
      1 | export default html\`<div>hello</div>\`;␊
    `

> Error 1/1

    `␊
    Message:␊
    > 1 | export default html\`<div>hello</div>\`;␊
        | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Do not use top-level side effects in modules.␊
    `

## invalid(23): module.id = 1; export const value = 1;

> Input

    `␊
      1 | module.id = 1;␊
      2 | export const value = 1;␊
    `

> Error 1/1

    `␊
    Message:␊
    > 1 | module.id = 1;␊
        | ^^^^^^^^^^^^^^ Do not use top-level side effects in modules.␊
      2 | export const value = 1;␊
    `

## invalid(24): export default `${setup()}`;

> Input

    `␊
      1 | export default \`${setup()}\`;␊
    `

> Error 1/1

    `␊
    Message:␊
    > 1 | export default \`${setup()}\`;␊
        | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Do not use top-level side effects in modules.␊
    `

## invalid(25): export default object[setup()];

> Input

    `␊
      1 | export default object[setup()];␊
    `

> Error 1/1

    `␊
    Message:␊
    > 1 | export default object[setup()];␊
        | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Do not use top-level side effects in modules.␊
    `
