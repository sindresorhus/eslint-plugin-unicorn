# Snapshot report for `test/prefer-top-level-await.mjs`

The actual snapshot is saved in `prefer-top-level-await.mjs.snap`.

Generated by [AVA](https://avajs.dev).

## Invalid(1): (async () => {})()

> Input

    `␊
      1 | (async () => {})()␊
    `

> Error 1/1

    `␊
    > 1 | (async () => {})()␊
        |           ^^ Prefer top-level await over an async IIFE.␊
    `

## Invalid(2): (async () => {})?.()

> Input

    `␊
      1 | (async () => {})?.()␊
    `

> Error 1/1

    `␊
    > 1 | (async () => {})?.()␊
        |           ^^ Prefer top-level await over an async IIFE.␊
    `

## Invalid(3): (async function() {})()

> Input

    `␊
      1 | (async function() {})()␊
    `

> Error 1/1

    `␊
    > 1 | (async function() {})()␊
        |  ^^^^^^^^^^^^^^ Prefer top-level await over an async IIFE.␊
    `

## Invalid(4): (async function() {}())

> Input

    `␊
      1 | (async function() {}())␊
    `

> Error 1/1

    `␊
    > 1 | (async function() {}())␊
        |  ^^^^^^^^^^^^^^ Prefer top-level await over an async IIFE.␊
    `

## Invalid(5): (async function run() {})()

> Input

    `␊
      1 | (async function run() {})()␊
    `

> Error 1/1

    `␊
    > 1 | (async function run() {})()␊
        |  ^^^^^^^^^^^^^^^^^^ Prefer top-level await over an async IIFE.␊
    `

## Invalid(6): (async function(c, d) {})(a, b)

> Input

    `␊
      1 | (async function(c, d) {})(a, b)␊
    `

> Error 1/1

    `␊
    > 1 | (async function(c, d) {})(a, b)␊
        |  ^^^^^^^^^^^^^^ Prefer top-level await over an async IIFE.␊
    `

## Invalid(7): if (foo) (async () => {})()

> Input

    `␊
      1 | if (foo) (async () => {})()␊
    `

> Error 1/1

    `␊
    > 1 | if (foo) (async () => {})()␊
        |                    ^^ Prefer top-level await over an async IIFE.␊
    `

## Invalid(8): { (async () => {})(); }

> Input

    `␊
      1 | {␊
      2 | 	(async () => {})();␊
      3 | }␊
    `

> Error 1/1

    `␊
      1 | {␊
    > 2 | 	(async () => {})();␊
        | 	          ^^ Prefer top-level await over an async IIFE.␊
      3 | }␊
    `

## Invalid(9): a = (async () => {})()

> Input

    `␊
      1 | a = (async () => {})()␊
    `

> Error 1/1

    `␊
    > 1 | a = (async () => {})()␊
        |               ^^ Prefer top-level await over an async IIFE.␊
    `

## Invalid(10): !async function() {}()

> Input

    `␊
      1 | !async function() {}()␊
    `

> Error 1/1

    `␊
    > 1 | !async function() {}()␊
        |  ^^^^^^^^^^^^^^ Prefer top-level await over an async IIFE.␊
    `

## Invalid(11): void async function() {}()

> Input

    `␊
      1 | void async function() {}()␊
    `

> Error 1/1

    `␊
    > 1 | void async function() {}()␊
        |      ^^^^^^^^^^^^^^ Prefer top-level await over an async IIFE.␊
    `

## Invalid(12): (async () => {})().catch(foo)

> Input

    `␊
      1 | (async () => {})().catch(foo)␊
    `

> Error 1/1

    `␊
    > 1 | (async () => {})().catch(foo)␊
        |                    ^^^^^ Prefer top-level await over using a promise chain.␊
    `

## Invalid(1): foo.then(bar)

> Input

    `␊
      1 | foo.then(bar)␊
    `

> Error 1/1

    `␊
    > 1 | foo.then(bar)␊
        |     ^^^^ Prefer top-level await over using a promise chain.␊
    `

## Invalid(2): foo.then?.(bar)

> Input

    `␊
      1 | foo.then?.(bar)␊
    `

> Error 1/1

    `␊
    > 1 | foo.then?.(bar)␊
        |     ^^^^ Prefer top-level await over using a promise chain.␊
    `

## Invalid(3): foo?.then(bar)

> Input

    `␊
      1 | foo?.then(bar)␊
    `

> Error 1/1

    `␊
    > 1 | foo?.then(bar)␊
        |      ^^^^ Prefer top-level await over using a promise chain.␊
    `

## Invalid(4): foo.catch(() => process.exit(1))

> Input

    `␊
      1 | foo.catch(() => process.exit(1))␊
    `

> Error 1/1

    `␊
    > 1 | foo.catch(() => process.exit(1))␊
        |     ^^^^^ Prefer top-level await over using a promise chain.␊
    `

## Invalid(5): foo.finally(bar)

> Input

    `␊
      1 | foo.finally(bar)␊
    `

> Error 1/1

    `␊
    > 1 | foo.finally(bar)␊
        |     ^^^^^^^ Prefer top-level await over using a promise chain.␊
    `

## Invalid(6): foo.then(bar, baz)

> Input

    `␊
      1 | foo.then(bar, baz)␊
    `

> Error 1/1

    `␊
    > 1 | foo.then(bar, baz)␊
        |     ^^^^ Prefer top-level await over using a promise chain.␊
    `

## Invalid(7): foo.then(bar, baz).finally(qux)

> Input

    `␊
      1 | foo.then(bar, baz).finally(qux)␊
    `

> Error 1/1

    `␊
    > 1 | foo.then(bar, baz).finally(qux)␊
        |                    ^^^^^^^ Prefer top-level await over using a promise chain.␊
    `

## Invalid(8): (foo.then(bar, baz)).finally(qux)

> Input

    `␊
      1 | (foo.then(bar, baz)).finally(qux)␊
    `

> Error 1/1

    `␊
    > 1 | (foo.then(bar, baz)).finally(qux)␊
        |                      ^^^^^^^ Prefer top-level await over using a promise chain.␊
    `

## Invalid(9): (async () => {})().catch(() => process.exit(1))

> Input

    `␊
      1 | (async () => {})().catch(() => process.exit(1))␊
    `

> Error 1/1

    `␊
    > 1 | (async () => {})().catch(() => process.exit(1))␊
        |                    ^^^^^ Prefer top-level await over using a promise chain.␊
    `

## Invalid(10): (async function() {}()).finally(() => {})

> Input

    `␊
      1 | (async function() {}()).finally(() => {})␊
    `

> Error 1/1

    `␊
    > 1 | (async function() {}()).finally(() => {})␊
        |                         ^^^^^^^ Prefer top-level await over using a promise chain.␊
    `

## Invalid(11): for (const foo of bar) foo.then(bar)

> Input

    `␊
      1 | for (const foo of bar) foo.then(bar)␊
    `

> Error 1/1

    `␊
    > 1 | for (const foo of bar) foo.then(bar)␊
        |                            ^^^^ Prefer top-level await over using a promise chain.␊
    `

## Invalid(12): foo?.then(bar).finally(qux)

> Input

    `␊
      1 | foo?.then(bar).finally(qux)␊
    `

> Error 1/1

    `␊
    > 1 | foo?.then(bar).finally(qux)␊
        |                ^^^^^^^ Prefer top-level await over using a promise chain.␊
    `

## Invalid(13): foo.then().toString()

> Input

    `␊
      1 | foo.then().toString()␊
    `

> Error 1/1

    `␊
    > 1 | foo.then().toString()␊
        |     ^^^^ Prefer top-level await over using a promise chain.␊
    `

## Invalid(14): !foo.then()

> Input

    `␊
      1 | !foo.then()␊
    `

> Error 1/1

    `␊
    > 1 | !foo.then()␊
        |      ^^^^ Prefer top-level await over using a promise chain.␊
    `

## Invalid(15): foo.then(bar).then(baz)?.then(qux)

> Input

    `␊
      1 | foo.then(bar).then(baz)?.then(qux)␊
    `

> Error 1/1

    `␊
    > 1 | foo.then(bar).then(baz)?.then(qux)␊
        |                          ^^^^ Prefer top-level await over using a promise chain.␊
    `

## Invalid(16): foo.then(bar).then(baz).then?.(qux)

> Input

    `␊
      1 | foo.then(bar).then(baz).then?.(qux)␊
    `

> Error 1/1

    `␊
    > 1 | foo.then(bar).then(baz).then?.(qux)␊
        |                         ^^^^ Prefer top-level await over using a promise chain.␊
    `

## Invalid(17): foo.then(bar).catch(bar).finally(bar)

> Input

    `␊
      1 | foo.then(bar).catch(bar).finally(bar)␊
    `

> Error 1/1

    `␊
    > 1 | foo.then(bar).catch(bar).finally(bar)␊
        |                          ^^^^^^^ Prefer top-level await over using a promise chain.␊
    `

## Invalid(1): const foo = async () => {}; foo();

> Input

    `␊
      1 | const foo = async () => {};␊
      2 | foo();␊
    `

> Error 1/1

    `␊
      1 | const foo = async () => {};␊
    > 2 | foo();␊
        | ^^^^^ Prefer top-level await over an async function \`foo\` call.␊
    ␊
    --------------------------------------------------------------------------------␊
    Suggestion 1/1: Insert \`await\`.␊
      1 | const foo = async () => {};␊
      2 | await foo();␊
    `

## Invalid(2): const foo = async () => {}; foo?.();

> Input

    `␊
      1 | const foo = async () => {};␊
      2 | foo?.();␊
    `

> Error 1/1

    `␊
      1 | const foo = async () => {};␊
    > 2 | foo?.();␊
        | ^^^^^^^ Prefer top-level await over an async function \`foo\` call.␊
    ␊
    --------------------------------------------------------------------------------␊
    Suggestion 1/1: Insert \`await\`.␊
      1 | const foo = async () => {};␊
      2 | await foo?.();␊
    `

## Invalid(3): const foo = async () => {}; foo().then(foo);

> Input

    `␊
      1 | const foo = async () => {};␊
      2 | foo().then(foo);␊
    `

> Error 1/1

    `␊
      1 | const foo = async () => {};␊
    > 2 | foo().then(foo);␊
        |       ^^^^ Prefer top-level await over using a promise chain.␊
    `

## Invalid(4): const foo = async function () {}, bar = 1; foo(bar);

> Input

    `␊
      1 | const foo = async function () {}, bar = 1;␊
      2 | foo(bar);␊
    `

> Error 1/1

    `␊
      1 | const foo = async function () {}, bar = 1;␊
    > 2 | foo(bar);␊
        | ^^^^^^^^ Prefer top-level await over an async function \`foo\` call.␊
    ␊
    --------------------------------------------------------------------------------␊
    Suggestion 1/1: Insert \`await\`.␊
      1 | const foo = async function () {}, bar = 1;␊
      2 | await foo(bar);␊
    `

## Invalid(5): foo(); async function foo() {}

> Input

    `␊
      1 | foo();␊
      2 | async function foo() {}␊
    `

> Error 1/1

    `␊
    > 1 | foo();␊
        | ^^^^^ Prefer top-level await over an async function \`foo\` call.␊
      2 | async function foo() {}␊
    ␊
    --------------------------------------------------------------------------------␊
    Suggestion 1/1: Insert \`await\`.␊
      1 | await foo();␊
      2 | async function foo() {}␊
    `

## Invalid(6): const foo = async () => {}; if (true) { alert(); } else { foo(); }

> Input

    `␊
      1 | const foo = async () => {};␊
      2 | if (true) {␊
      3 | 	alert();␊
      4 | } else {␊
      5 | 	foo();␊
      6 | }␊
    `

> Error 1/1

    `␊
      1 | const foo = async () => {};␊
      2 | if (true) {␊
      3 | 	alert();␊
      4 | } else {␊
    > 5 | 	foo();␊
        | 	^^^^^ Prefer top-level await over an async function \`foo\` call.␊
      6 | }␊
    ␊
    --------------------------------------------------------------------------------␊
    Suggestion 1/1: Insert \`await\`.␊
      1 | const foo = async () => {};␊
      2 | if (true) {␊
      3 | 	alert();␊
      4 | } else {␊
      5 | 	await foo();␊
      6 | }␊
    `
